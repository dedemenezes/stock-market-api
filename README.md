# Stock Market API
Tech challenge practice. First RESTful API built from scratch by me.

## Table of contents
* [Overview](#overview)
* [Authentication](#authentication)
* [Workflow](#workflow)
* [SDK](#software-development-kit)
* [Reference](#reference)

## Overview
The idea here is to practice how to build a RESTful API. A pretty simple one. 

Without login you can check an existing bearer any time.

```shell
http://stock--api.herokuapp.com/api/v1/bearers/1
```

For all other actions, you need an [account](#authentication).

All requests as `application/json`.

Base URL: `https://stock--api.herokuapp.com/`

## Authentication 
If you would like to test more, we provide you a authentication token when creating a [Client account](#client-account).

Our authenticity token is generated by [simple_token_authentication](https://github.com/gonzalo-bulnes/simple_token_authentication).

## Workflow
First, you need to create a [client](#client) account. We then will provide you an authentication token. Use your client account to create a [bearer](#bearer) for you. Now, you can check [all stocks](#stocks) that we have. If you want to [create a stock](#stock), it need a name, a [market price](#market-price) and your bearer inside the request body You can also check a [specific stock](#sotck), [change](url) your stock name and [remove](#delete) it from the list.

## SDK
#### Client
```console
curl -i -X POST \
  -H 'Content-Type: application/json' \
  -d '{ "user": { "email": "<YOU@EMAIL>", "password": "<YOUR_PASSWORD" } }' \
  https://stock--api.herokuapp.com/api/v1/clients
```
Use your token to create a [bearer](#bearer). Only bearers can CRUD stocks.

#### Create Bearer
´´´
curl -i -X POST \
  -H 'Content-Type: application/json' \
  -H 'X-User-Email: <YOU@EMAIL>' \
  -H 'X-User-Token: <YOUR_TOKEN>' \
  -d '{ "name": "<BEARER_NAME>" }' \
  https://stock--api.herokuapp.com/api/v1/bearers
´´´



Rails app generated with [lewagon/rails-templates](https://github.com/lewagon/rails-templates), created by the [Le Wagon coding bootcamp](https://www.lewagon.com) team.

Test for Senior Rails Developers
======
Please use git. Please work on the branch `master`.

Please submit your results as a zipped folder, including your commit history.

## Your Task:
You are going to build a simple stock market API - with Bearers who own Stocks, which have varying MarketPrices. Please remember, the goal of this exercise is not to make the application merely "functional". This is an opportunity for you to:

* Show off your development skills
* Utilize good design patterns
* Write clean, extendable, tested code

Treat this like a production application that will be worked on by developers other than yourself. While this test may seem simple, we are not interested in "gotchas" or obscure problems. We **are** interested in how you design and build a maintainable application.  Feel free to configure this project file as you see fit.

#### Instructions:
##### Models:
You should create three models with at minimum the following attributes:

+ `Stock` (name: string)
+ `Bearer` (name: string)
+ `MarketPrice` (currency: string, value_cents: integer)

A stock can only have one bearer and one market price at a time (no joint ownership, or differing buy/sell values in this simple application). Bearers should be **unique by name**, but can own multiple stocks. A market price should be **unique by the combination of currency and value_cents**, but can reflect the price of multiple stocks.

##### JSON API Endpoints:
Via one API endpoint the user should be able to create a `Stock` with a referenced `Bearer` and `MarketPrice`.

Another API endpoint should allow the user to update a `Stock`. `Bearer` and `MarketPrice` cannot be updated, but if attributes of either of those change, new objects need to be created and referenced with the existing `Stock`. If an existing bearer or market price exists already, they should be re-used and connected to the stock instead.

One simple API endpoint should list all stocks, showing information from connected models, and be an efficient database query.

In a last API endpoint it should be possible to soft-delete a stock so it doesn't appear anywhere anymore in regular queries but could still be retrieved when needed (e.g. an audit by financial authorities, or by a BI-Department).

Please keep your controllers very lean, do not implement duplication logic in the controllers.

##### Error Handling:
Error responses should be detailed in a way that they explain what exactly is missing or wrong. In order to test this, consider making validations that forbid `name` fields from containing the string "invalid". How you structure this is your decision.

##### Testing:
RSpec tests are required. Submissions without tests will be rejected. Where, how, and what to test is up to you! We have included FactoryBot for your convenience.


After that, you can test all endpoints that we have. Remeber, you need to provide your token and email inside the request header.
1. Create a bearer
2. 
